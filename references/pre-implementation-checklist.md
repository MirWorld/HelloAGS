# 开工前检查清单（Pre-Implementation Checklist）

目标：在写代码前 60 秒完成“对齐 + 验证 + 边界/复用”三件事，减少做错方向、返工与耦合回潮。

适用：开发实施阶段第一次改代码前；或任何改动型任务准备动手前。

---

## Checklist（命中就做，不需要逐条复述）

- **对齐摘要可复述**：能否用一句话复述目标与成功标准？非目标/约束是否明确且可执行？
- **高信号取证已完成**：按 `references/triage-pass.md` 完成一次取证，并将“事实/缺口/下一步唯一动作”写入 `task.md##上下文快照`（未落盘则禁止进入实现）
- **验证已绑定**：至少明确 1 条 `verify_min`（最小验证动作；SSOT 在 `how.md` 的 `verify_min: ...`），并确保 `task.md` 里有可执行验证项/证据记录位点（见 `references/triage-pass.md`）；门禁命令来自 `HAGSWorks/project.md#项目能力画像`
- **语言栈默认值已收敛（如适用）**：若已能明确技术栈但项目命令/规范不完整：按 `references/stack-detection.md` 选取最小闭环命令兜底；并按对应语言 Playbook 收敛实现习惯（少量硬禁止，其余推荐默认）：
  - Rust：`references/stacks/rust.md`
  - .NET：`references/stacks/dotnet.md`
  - Delphi：`references/stacks/delphi.md`
- **影响面已圈定**：预计改哪些模块/文件？能否收敛到更小范围（避免“顺手扩大”）
- **执行域声明**：按 `references/execution-guard.md` 明确 Allow/Deny/NewFiles/Refactor，并写入 `task.md##上下文快照`（决策区）
- **复用检索已做**：`rg` 搜索相似实现/类型/错误码/字段名；优先复用而不是新造
- **边界与依赖明确**：落点与依赖方向是否正确？是否有跨层 import 风险？
- **风险与回滚**：是否触发 EHRB？是否需要兼容/降级/回滚策略？
- **落盘**：关键决策/约束/下一步唯一动作写入 `task.md##上下文快照`（事实/推断隔离 + 来源标签）

---

## 发现缺口时怎么处理（优先级）

1. **缺成功标准/边界/约束**：用 1–3 个高信息增益问题追问；或将相关任务标记为 `[?]` 暂停推进
2. **缺验证方式**：在 `task.md` 补最小可复现验证步骤/脚本（必须可重复）
3. **缺边界/复用结论**：在 `how.md` 补齐“边界与依赖 / 复用与去重策略 / 重构范围与不变量”

